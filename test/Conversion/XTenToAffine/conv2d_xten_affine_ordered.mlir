// (c) Copyright 2019 Xilinx Inc. All Rights Reserved.

// RUN: aten-opt %s -xten-to-affine='xten-loop-order=3,0,1,2,4' -cse | FileCheck %s --check-prefix=ATEN
// ATEN:       module {
// ATEN-LABEL:   {affine_opt_label = "xten.conv2d_op_bias"}
// ATEN-NEXT:      affine.for %[[VAL_1:.*]] = 0 to 208 {
// ATEN-NEXT:        affine.for %[[VAL_2:.*]] = 0 to 1 {
// ATEN-NEXT:          affine.for %[[VAL_3:.*]] = 0 to 6 {
// ATEN-NEXT:            affine.for %[[VAL_4:.*]] = 0 to 4 {
// ATEN-NEXT:              affine.for %[[VAL_5:.*]] = 0 to 416 {
// ATEN-NEXT:                affine.for %[[VAL_6:.*]] = 0 to 3 {
// ATEN-NEXT:                  affine.for %[[VAL_7:.*]] = 0 to 3 {
// ATEN:                       }
// ATEN:                     }
// ATEN:                   }
// ATEN:                 }
// ATEN:               }
// ATEN:             }
// ATEN:           } {affine_opt_label = "xten.conv2d_op"}


module  {
  func @graph(%arg0: tensor<1x4x208x416xf32>) -> tensor<1x6x208x416xf32> {
    %cst = constant dense<"0x568DA3BA281BB73D64770CBE5633FBBD4E7783BDE60F373DAB6958BBDF51073E965472BC66A4343D904F4EBD4B3006BDD00B23BE180FE2BD9BB48CBDAB4ECA3BEBF0863DCBCECC3D6667E7BD53A394BDCBF4773D34B80D3E307E0CBD7B6CFF3DAB11DCBCB678903CDC881A3E8A521EBEDEE1D6BDD6D32CBD3E0D85BDC674133ECE3EDDBD80209DBD2378EEBDFAD61FBE0640C7BD6AB4123E284F983D566FA53D2B9C0F3CF8FEAEBD56FEE63CBF591FBECEA2F6BDB3F7AFBD335CD73D8821C83D306197BDD60EC5BBAB4DDA3D57AA293E1878873D6072B83CFEDBE43D56FAC8BDF66BFE3C9E5104BECB92ECBDC353B0BDB3719A3D5045893D8E30CABD0B3D4E3DE861BB3D2B54ACBCAB85D03B562D1E3D56C1D33D86DF233E0F8503BE3B2D7ABDBB25863DE0670D3EF083143EC296163E50DC073DA66814BE6B337B3C3B8AD5BDB30D1FBED4A2173EA0C4013EAA3E2ABE608DFF3C0B01E6BC4BAEE0BC683F9CBD0843833D462CCABD7B427A3D739DAC3DD059F43DB6417F3D32EA28BE006CDDBDD06EAA3D10E20E3D642205BEE08BC4BDF78D203E1BFFE53D76D494BD1BD12BBDA69322BE565344BBA68500BE17A503BE6B7516BC80FFCC3C4EC98BBD208ACA3DF6B6CFBD9BDB1A3E6BEAE93D98EB0FBEB0E729BD006EF63B2034C73C36E9213DE8F2853D4091233CDE8BA6BDE383A13D3AB623BE804FCABD50E42ABD9E44A6BDD0D16EBDD2E10BBEAB3611BDA6EC113DF35DDEBDD6220CBC0058F43D4B5B8CBC56C8973B56926BBCB6280A3D8008D93DD2A9213E08C4D83D8308223E807C45BC445019BE80D1A1BD686AE83DAB9C8DBA93A8A9BDACC802BE00B81FBE480B10BE4B780ABD7330BB3DF089B83DAC9824BEE8EAD43D5C8C05BEA05210BDBE668ABDF67D03BD600906BDD22519BE2E5C13BE8BA5D5BC00410D3B260F9BBD7B94803D279C19BE004938BC6C16163E263A8BBDCF1C1A3EF63A773D1F051ABEF0F5D73D4B8D9DBCA05F98BD6379083E38EA09BECB81923CD6ED0EBD1EC0F33D0B903E3D3303A43D0017713D002A24BD8B910FBDABA40CBE10F3B83D6F81073E7B8CE93DE6C4F0BD2B93F33B169EF0BD0BE6BBBD96E5C6BD464C693DB067CBBD564D6EBB80BFE53B0608DC3DA70201BE5B54EABDFB32C6BD1EE9EE3D106575BD96F40F3E80DB763D00E3AC3C009EA2BA5BF306BDAB4DAB3C20E21BBDAB7E99BA0035AE3C"> : tensor<6x4x3x3xf32>
    %cst_0 = constant dense<[-0.130367517, -0.0873552412, 0.134582132, -0.135257781, -0.011967699, 0.164873123]> : tensor<6xf32>
    %bool_false = basicpy.bool_constant false
    %c0_i64 = constant 0 : i64
    %c1_i64 = constant 1 : i64
    %0 = basicpy.build_list %c1_i64, %c1_i64 : (i64, i64) -> !basicpy.ListType
    %1 = basicpy.build_list %c1_i64, %c1_i64 : (i64, i64) -> !basicpy.ListType
    %2 = basicpy.build_list %c1_i64, %c1_i64 : (i64, i64) -> !basicpy.ListType
    %3 = basicpy.build_list %c0_i64, %c0_i64 : (i64, i64) -> !basicpy.ListType
    %4 = "xten.conv2d"(%arg0, %cst, %cst_0, %0, %1, %2, %bool_false, %3, %c1_i64) : (tensor<1x4x208x416xf32>, tensor<6x4x3x3xf32>, tensor<6xf32>, !basicpy.ListType, !basicpy.ListType, !basicpy.ListType, !basicpy.BoolType, !basicpy.ListType, i64) -> tensor<1x6x208x416xf32>
    return %4 : tensor<1x6x208x416xf32>
  }
}

